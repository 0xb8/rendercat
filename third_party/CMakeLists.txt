add_subdirectory(fmt EXCLUDE_FROM_ALL)
add_subdirectory(mikktspace EXCLUDE_FROM_ALL)
add_subdirectory(tinyheaders_integration EXCLUDE_FROM_ALL)
add_subdirectory(stb_integration EXCLUDE_FROM_ALL)

add_subdirectory(doctest EXCLUDE_FROM_ALL)

set(GLFW_BUILD_EXAMPLES OFF)
set(GLFW_BUILD_TESTS    OFF)
set(GLFW_BUILD_DOCS     OFF)
set(GLFW_INSTALL        OFF)
add_subdirectory(glfw EXCLUDE_FROM_ALL)

set(ZCM_ENABLE_TESTS OFF)
set(ZCM_ENABLE_COVERAGE_IN_DEBUG OFF)
add_subdirectory(zcm EXCLUDE_FROM_ALL)
add_subdirectory(imgui_integration EXCLUDE_FROM_ALL)
add_subdirectory(debug_draw_integration EXCLUDE_FROM_ALL)

set(JSON_BuildTests OFF CACHE INTERNAL "")
add_subdirectory(nlohmann_json EXCLUDE_FROM_ALL)
add_subdirectory(fx-gltf EXCLUDE_FROM_ALL)

if(NOT USE_SYSTEM_GLBINDING)
	set(OPTION_BUILD_EXAMPLES OFF)
	set(OPTION_BUILD_TOOLS OFF)
	add_subdirectory(glbinding EXCLUDE_FROM_ALL)
	if(CMAKE_CXX_COMPILER_ID MATCHES Clang|GNU)
		target_compile_options(glbinding     PRIVATE  $<$<CONFIG:DEBUG>:-O3 -g0 -Wno-deprecated-copy>)
		target_compile_options(glbinding-aux PRIVATE  $<$<CONFIG:DEBUG>:-O3 -g0 -Wno-deprecated-copy>)
	endif()
endif()

if(CMAKE_CXX_COMPILER_ID MATCHES Clang|GNU)
	target_compile_options(stb_image      PRIVATE  $<$<CONFIG:DEBUG>:-O3>)
	target_compile_options(tinyfiles      PRIVATE  $<$<CONFIG:DEBUG>:-O3>)
	target_compile_options(mikktspace     PRIVATE  $<$<CONFIG:DEBUG>:-O3>)
	target_compile_options(imgui          PRIVATE  $<$<CONFIG:DEBUG>:-O3>)
	target_compile_options(zcm            PRIVATE  $<$<CONFIG:DEBUG>:-O3>)
	target_compile_options(debug_draw     PRIVATE  $<$<CONFIG:DEBUG>:-O3>)
endif()
